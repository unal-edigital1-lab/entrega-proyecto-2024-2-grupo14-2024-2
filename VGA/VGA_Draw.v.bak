`include "define.vh";

module VGA_Draw(
    // Salida de color VGA
    output reg oRed,
    output reg oGreen,
    output reg oBlue,
    
    // Posición actual en la pantalla
    input [9:0] iVGA_X,
    input [9:0] iVGA_Y,
    input iVGA_CLK,
    
    // Señales de control
    input reset,
    input iColor_SW, // Modo de dibujo: 0 para juego, 1 para líneas de colores
    input [0:1] ent // Tipo de entidad a dibujar
);

// Siempre que haya un flanco de subida en el reloj VGA o un reset, se ejecuta este bloque
always @(posedge iVGA_CLK or posedge reset) begin
    if (reset) begin
        // Si se activa el reset, los colores se ponen en negro
        oRed   <= 0;
        oGreen <= 0;
        oBlue  <= 0;
    end else begin
        if (iColor_SW == 0) begin
            // Modo de juego: Se dibujan las entidades con colores específicos
				if (ent == `ENT_NOTHING) begin
					  oRed   <= 0;
					  oGreen <= 0;
					  oBlue  <= 0;
				end else if(ent == `ENT_SNAKE_HEAD || ent == `ENT_SNAKE_TAIL) begin
					  oRed   <= 0;
					  oGreen <= 1;
					  oBlue  <= 0;					  
			   end else begin
					  oRed   <= 1;
					  oGreen <= 0;
					  oBlue  <= 0;						  
				end
        end else begin
            // Modo de líneas de colores
            if (iVGA_Y < 60) begin
                oRed <= 1;
                oGreen <= 1;
                oBlue <= 1;
            end else if (iVGA_Y < 120) begin
                oRed <= 1;
                oGreen <= 0;
                oBlue <= 1;
            end else if (iVGA_Y < 180) begin
                oRed <= 1;
                oGreen <= 1;
                oBlue <= 0;
            end else if (iVGA_Y < 240) begin
                oRed <= 1;
                oGreen <= 0;
                oBlue <= 0;
            end else if (iVGA_Y < 300) begin
                oRed <= 0;
                oGreen <= 1;
                oBlue <= 1;
            end else if (iVGA_Y < 360) begin
                oRed <= 0;
                oGreen <= 0;
                oBlue <= 1;
            end else if (iVGA_Y < 420) begin
                oRed <= 0;
                oGreen <= 1;
                oBlue <= 0;
            end else begin
                oRed <= 0;
                oGreen <= 0;
                oBlue <= 0;
            end
        end
    end
end

endmodule
